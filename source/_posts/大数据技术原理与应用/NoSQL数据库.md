---
title: （五）NoSQL数据库
date: 2020-12-27 14:14:26
tags: 大数据技术原理与应用
---

### 一. NoSql简介
**N**ot **o**nly **SQL** → NoSQL（非关系型数据库）
通常，NoSQL数据库具有一下几个特点：
- 灵活的可扩展性（海量数据存储）
- 灵活的数据模型
- 与云计算紧密融合

### 二. NoSQL数据库兴起的原因

#### 1. 关系数据库已经无法满足Web2.0的需求
- 无法满足海量数据管理需求
- 无法满足数据高并发的需求
- 无法满足高可扩展性和高可用性的需求

MySQL集群是否可以完全解决问题？
- 复杂性：
- 数据库复制：
- 扩容问题：
- 动态数据迁移问题：

#### 2. "One size fits all"模式很难适用于截然不同的业务场景
关系模型作为统一的数据模型既被用于数据分析（数据批量处理，强调高吞吐），也被用于在线业务（强调高延迟）。但是两者已经演化出完全不同的架构，用同一套模型来抽象显然不合适的。
- Hadoop就是针对数据分析
- MongoDB、Redis等针对在线业务
两者都抛弃了关系模型

#### 3. 关系数据库的关键特性包括完善的事务机制和高效的查询机制。但是，关系数据库引以为傲的这两个关键特性到了Web2.0时代都成了鸡肋。
- Web2.0网站系统通常不需要严格的数据库事务
- Web2.0并不要求严格的读写实时性
- Web2.0通常不包含大量复杂的SQL查询（去结构化，存储空间换取更好的查询性能）

### 三. NoSql与关系型数据库的比较
比较方面：
数据库原理
数据规模
数据库模式
查询效率
一致性
数据完整性
扩展性
可用性
标准化
技术支持
可维护性

总结：
- 关系数据库：
优势：以完善的关系代数理论作为基础，有严格的标准，支持事务ACID四性，借助索引机制可以实现高效的查询，技术成熟，有专业公司的技术支持
劣势：可扩展性较差，无法较好支持海量数据存储，数据模型过于死板、无法较好支持Web2.0应用，事务机制影响了系统的整体性能等

- NoSQL数据库
优势：可以支持超大规模数据存储，灵活的数据模型可以很好地支持Web2.0应用，具有强大的横向扩展能力等
劣势：缺乏数学理论基础，复杂查询性能不高，大都不能实现事务强一致性，很难实现数据完整性，技术尚不成熟，缺乏专业团队的技术支持，维护较困难等

<br/>
关系数据库和NoSQL数据库各有优缺点，彼此无法取代
关系数据库应用场景：电信、银行等领域的关键业务系统，需要保证强事务一致性
NoSQL数据库应用场景：互联网企业、传统企业的非关键业务（比如数据分析）

**采用混合架构**
案例：亚马逊公司就使用不同类型的数据库来支撑它的电子商务应用
对于“购物篮”这种临时性数据，采用键值存储会更加高效
当前的产品和订单信息则适合存放在关系数据库中
大量的历史订单信息则适合保存在类似MongoDB的文档数据库中

### 四. NoSQL的四大类型

#### 1. 键值数据库：redis,riak,amazon DynamoDB
#### 2. 列族数据库：BigTable，HBase
#### 3. 文档数据库：mongoDB，MarkLogic,Couchbase
#### 4. 图数据库：Neo4j,InfiniteGraph

### 五. NoSQL的三大基石

#### 1. CAP
- C(Consistency):一致性
- A(Avaliability):可用性
- P(Tolerance of Network Partition):分区容忍性

CAP理论告诉我们，一个分布式系统不可能同时满足一致性、可用性和分区容忍性这三个需求，最多只能同时满足其中两个，正所谓“鱼和熊掌不可兼得”。

当处理CAP的问题时，可以有几个明显的选择：
- CA:放弃P
- CP:
- AP:

#### 2. BASE

- Basically Avalible(基本可用)
- Soft-State(软状态)
- Eventual consistency(最终一致性)

#### 3. 最终一致性

### 六. 从NoSQL到NewSQL数据库
![](/images/大数据概述/Newsql.jpg)



